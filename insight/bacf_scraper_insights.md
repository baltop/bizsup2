# BACF(부안군문화재단) 스크래퍼 개발 인사이트

## 프로젝트 개요
- **사이트**: 부안군문화재단 공지사항 (https://www.bacf.or.kr/base/board/list?boardManagementNo=2&menuLevel=2&menuNo=18)
- **개발일**: 2025-07-18
- **수집 범위**: 3페이지 (총 36개 공고)
- **성공 여부**: ✅ 완료 (36개 공고 수집, 33개 첨부파일 다운로드)

## 사이트 특성 분석

### 1. URL 구조
- **단순한 파라미터**: 표준적인 GET 파라미터 구조
- **페이지네이션**: `page` 파라미터로 페이지 이동
- **고정 파라미터**: boardManagementNo, menuLevel, menuNo 등 표준 게시판 파라미터

### 2. 네비게이션 방식
- **표준 HTML 링크**: 일반적인 `<a href="">` 링크 사용
- **단순한 URL 구조**: 상세 페이지 URL이 명확하게 정의됨
- **세션 관리**: 일반적인 웹사이트로 특별한 세션 관리 불필요

### 3. HTML 구조
- **목록 페이지**: 표준 `<table>` 구조
- **상세 페이지**: 일반적인 게시판 레이아웃
- **첨부파일**: `/download/BASIC_ATTACH?storageNo=` 엔드포인트 사용

## 주요 기술적 특징

### 1. SSL 인증서 문제
```python
# SSL 인증서 검증 비활성화 필요
self.verify_ssl = False
import urllib3
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)
```

### 2. 단순한 URL 파라미터 관리
```python
# 단순한 파라미터 관리
self.base_params = {
    'boardManagementNo': '2',
    'menuLevel': '2',
    'menuNo': '18',
    'searchCategory': '',
    'searchType': '',
    'searchWord': ''
}
```

### 3. 첨부파일 다운로드 특성
- **표준 다운로드 URL**: `/download/BASIC_ATTACH?storageNo=숫자`
- **한글 파일명**: UTF-8 인코딩으로 완전 지원
- **다양한 파일 크기**: 27KB ~ 4.4MB 다양한 크기

## 성공 요인

### 1. 표준 웹사이트 구조
- **일반적인 게시판**: 복잡한 JavaScript 없이 표준 HTML 구조
- **명확한 링크 구조**: href 속성으로 직접 URL 접근 가능

### 2. 다층 본문 추출 전략
```python
# 여러 방법으로 본문 추출 시도
# 1. 제목 추출 (h3 태그)
# 2. 메타 정보 추출 (ul > li)
# 3. 본문 컨테이너 추출 (div.content, article 등)
# 4. 전체 본문 영역 추출 (main, div#main)
```

### 3. 첨부파일 추출 전략
```python
# 3단계 첨부파일 추출
# 1. 첨부파일 섹션 찾기 (div.attach, div.file 등)
# 2. 일반 파일 링크 찾기 (download, file, attach 포함)
# 3. 특정 파일 확장자 링크 찾기 (pdf, hwp, doc 등)
```

## 발견된 이슈와 해결방법

### 1. SSL 인증서 문제
**문제**: 사이트의 SSL 인증서 검증 실패
**해결**: `verify_ssl = False` 설정으로 SSL 검증 비활성화

### 2. 첨부파일 섹션 인식
**문제**: 첨부파일 섹션이 명확하지 않음
**해결**: 다중 방법으로 첨부파일 링크 탐지

### 3. 본문 추출 일관성
**문제**: 게시글마다 본문 구조가 다름
**해결**: 여러 방법을 순차적으로 시도하는 fallback 전략

## 성능 통계
- **총 수집 공고**: 36개
- **총 첨부파일**: 33개
- **수집 시간**: 약 3분 (평균 5초/공고)
- **성공률**: 100% (모든 공고 및 첨부파일 성공적 수집)
- **최대 파일 크기**: 4.4MB (한국동시축제 백일장 관련 문서)

## 파일 구조
```
output/bacf/
├── 001_2025_부안_예술인_통합전시_[하이라이트_인_서울]/
├── 002_[모집공고]_제3회_신석정_창작음악제_참가자_모집/
│   ├── content.md
│   └── attachments/
│       ├── 붙임1.제3회_신석정_창작음악제_참가자_모집공모.pdf
│       ├── 붙임2.신석정_원문시_30편.pdf
│       └── 붙임3.제3회_신석정_창작음악제_참가자_지원_서류_양식.hwp
├── ... (36개 공고 폴더)
└── processed_titles_enhancedbacf.json
```

## 다음 개발자를 위한 권장사항

### 1. 개발 전 준비
- **표준 웹사이트**: 일반적인 게시판 구조로 개발이 용이
- **SSL 설정**: 인증서 문제 해결을 위한 verify_ssl 설정 필요
- **브라우저 분석**: 개발자 도구로 첨부파일 섹션 구조 확인

### 2. 코드 작성 시 주의사항
- **베이스 스크래퍼 활용**: 기본 메서드 최대한 활용
- **다층 추출 전략**: 여러 방법으로 본문 및 첨부파일 추출
- **SSL 처리**: 인증서 문제 해결 필수

### 3. 테스트 전략
- **단계별 테스트**: 1페이지 → 3페이지 → 전체 순서로 테스트
- **파일 크기 확인**: 다양한 크기의 파일 다운로드 검증
- **한글 파일명 확인**: UTF-8 인코딩 처리 확인

## 핵심 교훈
1. **표준 웹사이트의 장점**: 복잡한 JavaScript 없이 직접적인 스크래핑 가능
2. **SSL 인증서 문제**: 정부/공공기관 사이트에서 자주 발생하는 문제
3. **다층 추출 전략의 중요성**: 게시판 구조가 일관되지 않을 때 필수
4. **베이스 스크래퍼 활용**: 표준 구조일 때 기본 메서드 활용이 효과적

## 특별 주의사항
- **큰 파일 다운로드**: 4MB 이상의 파일도 정상적으로 다운로드됨
- **한글 파일명**: 완전한 UTF-8 지원으로 문제없음
- **중복 제목**: 동일한 제목의 공고가 여러 페이지에 나타날 수 있음

## 비교 우위점 (vs KEPCO)
1. **SSL 설정**: 한 번만 설정하면 해결
2. **URL 구조**: 복잡한 파라미터 관리 불필요
3. **네비게이션**: JavaScript 없이 직접 링크 사용
4. **개발 시간**: 상대적으로 짧은 개발 시간

이 인사이트를 바탕으로 유사한 표준 게시판 구조의 웹사이트 스크래핑에 참고할 수 있습니다.