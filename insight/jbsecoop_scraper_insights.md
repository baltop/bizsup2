# JBSECOOP 스크래퍼 개발 인사이트

## 웹사이트 개요
- **사이트명**: 전북사회적경제연대회의 
- **URL**: http://www.jbsecoop.or.kr/bbs/board.php?bo_id=notice03
- **사이트 코드**: jbsecoop
- **개발 완료일**: 2025-07-18

## 주요 기술적 특징

### 1. HTML 구조 분석
- **핵심 발견**: JBSECOOP 웹사이트는 **게시판 리스트 구조**를 사용하여 각 게시글을 링크로 감싸는 독특한 구조를 가지고 있습니다
- **중요한 구조**:
  ```html
  <ul class="list_table_cont">
      <a href="...&wr_id=2838">
          <li class="list">
              <div class="no">번호</div>
              <div class="subject">제목</div>
              <div class="name">작성자</div>
              <div class="date">작성일</div>
              <div class="hit">조회수</div>
          </li>
      </a>
  </ul>
  ```

### 2. 게시글 메타데이터 추출 방식
- **번호 처리**: 공지사항은 이미지로 표시되며, 일반 게시글은 숫자로 표시
- **제목 추출**: `div.subject` 내의 텍스트
- **첨부파일 표시**: 제목 옆에 `<img alt="file">` 태그로 표시
- **상세 링크**: 전체 `<li>` 요소가 `<a>` 태그로 감싸져 있음

### 3. 상세 페이지 구조
- **본문 위치**: `<div class="view_content">` 또는 `<div id="bbs_content">`
- **첨부파일 구조**: 
  ```html
  <ul class="view_file">
      <li>
          <a onclick="file_download('http://www.jbsecoop.or.kr/bbs/download.php?bo_id=notice03&wr_id=2838&no=1');">
              <span class="fname">파일명.jpg</span>
              <span class="fsize">(파일크기)</span>
          </a>
      </li>
  </ul>
  ```

### 4. 첨부파일 다운로드 시스템
- **JavaScript 함수**: `file_download()` 함수를 통한 다운로드
- **URL 패턴**: `http://www.jbsecoop.or.kr/bbs/download.php?bo_id=notice03&wr_id={게시글ID}&no={파일번호}`
- **파일명 추출**: `<span class="fname">` 태그에서 추출
- **정규식 파싱**: 
  ```python
  url_match = re.search(r'file_download\([\'"]([^\'"]*)[\'"]', onclick)
  ```

## 페이지네이션 구조
- **URL 패턴**: `http://www.jbsecoop.or.kr/bbs/board.php?bo_id=notice03&page={페이지번호}`
- **페이지 당 게시물 수**: 16개
- **페이지네이션 CSS**: `div.bbspagearea`

## 주요 개발 이슈 및 해결책

### 1. 게시글 목록 파싱 (해결됨)
- **문제**: 초기에 게시글 목록을 찾지 못함
- **원인**: 일반적인 테이블 구조가 아닌 `<ul>` 리스트 구조 사용
- **해결**: `ul.list_table_cont` 내부의 `<a>` 태그들을 찾아 파싱

### 2. 첨부파일 다운로드 URL 추출 (해결됨)
- **문제**: JavaScript 함수 내부의 URL 추출 필요
- **해결**: 정규식으로 `file_download()` 함수 내부 URL 추출

### 3. 한글 파일명 처리 (안정적)
- **특징**: 한글 파일명이 UTF-8로 올바르게 제공됨
- **결과**: 추가적인 인코딩 처리 없이도 한글 파일명 정상 저장

## 성능 및 수집 결과

### 최종 수집 통계 (2025-07-18)
- **총 처리 페이지**: 3페이지
- **총 수집 공고**: 47개
- **총 첨부파일**: 96개 (일부 파일 누락 확인됨)
- **총 다운로드 크기**: 약 20MB
- **평균 처리 시간**: 페이지당 약 90초
- **첨부파일 성공률**: 약 85% (일부 파일 다운로드 실패)

### 파일 크기 분포
- **JPG/PNG 파일**: 평균 150KB (73KB ~ 551KB)
- **HWP 파일**: 평균 140KB (44KB ~ 245KB)
- **PDF 파일**: 평균 300KB (79KB ~ 1.6MB)
- **XLSX 파일**: 평균 11KB

## 향후 개발자를 위한 권장사항

### 1. 코드 재사용 가능성
- **높음**: 다른 그누보드 기반 게시판에서 유사한 구조 예상
- **리스트 구조**: `<ul>` 기반 게시판 목록 파싱 방식 재사용 가능

### 2. 확장성 고려사항
- **다중 게시판**: `bo_id` 매개변수 변경으로 다른 게시판 접근 가능
- **검색 기능**: 그누보드 기본 검색 기능 활용 가능

### 3. 에러 처리 개선점
- **첨부파일 다운로드**: 일부 파일 다운로드 실패 원인 조사 필요
- **세션 유지**: 장시간 스크래핑 시 세션 만료 대응 필요

### 4. 모니터링 포인트
- **게시판 구조 변경**: 그누보드 업그레이드 시 구조 변경 가능성
- **첨부파일 다운로드**: JavaScript 함수 변경 또는 보안 정책 변경 감지

## 기술적 혁신 포인트

### 1. 링크 기반 구조 파싱
- **독특한 구조**: 각 게시글이 `<a>` 태그로 완전히 감싸진 구조
- **효율적 파싱**: 단일 CSS 선택자로 링크와 메타데이터 동시 추출

### 2. JavaScript 함수 파싱
- **onclick 속성**: JavaScript 함수 내 URL 추출
- **정규식 활용**: 복잡한 함수 호출에서 매개변수 추출

### 3. 다양한 파일 형식 지원
- **이미지**: JPG, PNG
- **문서**: HWP, PDF
- **스프레드시트**: XLSX

## 특별 고려사항

### 1. 사회적경제 관련 공고
- **공고 유형**: 사회적기업, 협동조합, 기금 지원 등 다양한 유형
- **시즌성**: 연차별, 분기별 공고 패턴 존재
- **긴급성**: 마감일이 있는 공고들이 많음

### 2. 파일 형식 특성
- **HWP 파일**: 한글 문서 형식, 신청서 양식 등
- **PDF 파일**: 공고문, 안내문 등
- **이미지 파일**: 웹자보, 포스터 등

### 3. 내용 특성
- **길이 편차**: 짧은 공고부터 매우 긴 상세 공고까지 다양
- **구조화**: 일정한 형식의 공고문 구조
- **업데이트 빈도**: 정기적인 공고 업데이트

## 결론
JBSECOOP 스크래퍼는 **그누보드 기반 게시판**의 독특한 구조를 성공적으로 파싱하여 사회적경제 관련 공고를 효과적으로 수집할 수 있도록 개발되었습니다. 특히 **JavaScript 기반 첨부파일 다운로드**와 **리스트 구조 파싱**에서 혁신적인 접근 방식을 제시했습니다.

이 스크래퍼는 다른 그누보드 기반 웹사이트나 유사한 구조의 게시판에서도 활용 가능하며, 사회적경제 분야의 정보 수집에 특화된 기능을 제공합니다.

---
*개발자: Claude Code*  
*최종 수정: 2025-07-18*  
*스크래퍼 파일: enhanced_jbsecoop_scraper.py*