# DCTF 스크래퍼 개발 인사이트

## 사이트 정보
- **사이트명**: 대구창조경제혁신센터 공지사항
- **URL**: https://dctf.or.kr/bbs/board.php?bo_table=3_sub1
- **사이트 코드**: dctf

## 사이트 구조 분석

### 1. 페이지네이션 방식
- **방식**: GET 기반 페이지네이션 (단순함)
- **URL 패턴**: 
  - 1페이지: `https://dctf.or.kr/bbs/board.php?bo_table=3_sub1`
  - 2페이지 이상: `https://dctf.or.kr/bbs/board.php?bo_table=3_sub1&page={PAGE_NUMBER}`
- **페이지당 게시물**: 15개

### 2. 목록 페이지 구조
- **테이블 구조**: `div.tbl_head01.tbl_wrap table` (주의: table 태그가 div 내부에 있음)
- **컬럼 순서**: 번호, 제목, 작성자, 조회수, 날짜 (5개 컬럼)
- **제목 링크**: `td.td_subject div.bo_tit a` (div 내부의 a 태그)
- **카테고리**: `td.td_subject a.bo_cate_link` (제목 위에 카테고리 링크)

### 3. 상세 페이지 구조
- **URL 패턴**: `https://dctf.or.kr/bbs/board.php?bo_table=3_sub1&wr_id={POST_ID}`
- **본문 위치**: `article` 태그 내부의 텍스트 요소들
- **첨부파일**: `a[href*="download.php"]` 패턴의 링크

### 4. 첨부파일 다운로드 구조
- **다운로드 URL 패턴**: `https://dctf.or.kr/bbs/download.php?bo_table=3_sub1&wr_id={POST_ID}&no={FILE_NUMBER}`
- **페이지 매개변수**: 2페이지 이상에서는 `&page={PAGE_NUMBER}` 추가
- **파일 형식**: HWP, HWPX, PDF, XLSX 등 다양한 형식

## 기술적 특징

### 1. 사이트 구조 - PHP 기반 게시판
- **프레임워크**: 그누보드(Gnuboard) 또는 유사한 PHP 기반 BBS
- **인증 불필요**: 로그인 없이 모든 게시물 접근 가능
- **세션 관리**: 기본적인 세션 관리로 충분

### 2. HTML 구조 특징
- **테이블 래핑**: 테이블이 div 컨테이너 내부에 있어 CSS 선택자 주의 필요
- **제목 구조**: 카테고리 + 제목이 동일한 셀에 분리되어 있음
- **본문 파싱**: 단순한 텍스트 추출보다는 의미있는 내용 필터링 필요

### 3. 한글 파일명 처리
- **완전 지원**: UTF-8 인코딩으로 한글 파일명 정상 처리
- **예시**: `2025년_동해관광택시_관광상품_모객여행사_모집_공고문.hwp`
- **특수문자 처리**: 괄호, 공백 등 특수문자도 정상 처리

## 성능 및 결과

### 수집 결과
- **총 페이지**: 3페이지
- **총 공고 수**: 45개
- **다운로드 파일**: 35개
- **중복 방지**: JSON 기반 해시 저장 정상 작동

### 파일 구조
```
output/dctf/
├── processed_titles_enhanceddctf.json  # 중복 방지 데이터
├── 001_2025년_동해관광택시_관광상품_모객_여행사_모집/
│   ├── content.md
│   └── attachments/
│       └── 2025년_동해관광택시_관광상품_모객여행사_모집_공고문.hwp
└── ... (44개 더)
```

## 개발 시 주의사항

### 1. CSS 선택자 주의점
- **테이블 선택**: `table.tbl_head01.tbl_wrap` (X) → `div.tbl_head01.tbl_wrap table` (O)
- **제목 링크**: `.bo_tit a` (X) → `div.bo_tit a` (O)
- **카테고리**: `.bo_cate_link` (X) → `a.bo_cate_link` (O)

### 2. 페이지네이션 처리
- **1페이지**: `page` 매개변수 없음
- **2페이지 이상**: `&page={PAGE_NUMBER}` 추가
- **다운로드 URL**: 상세 페이지 URL에 페이지 정보 포함

### 3. 본문 내용 추출
- **단순 텍스트 추출**: 메타정보(조회수, 작성자 등)도 함께 추출됨
- **필터링 필요**: 의미있는 내용만 추출하도록 키워드 필터링
- **길이 제한**: 5자 이상의 텍스트만 추출

### 4. 첨부파일 처리
- **다운로드 링크**: `download.php` 패턴으로 일관성 있음
- **파일 형식**: HWP, HWPX, PDF, XLSX 등 다양한 형식
- **크기 검증**: 1KB 미만 파일의 HTML 여부 확인

## 개발 팁

### 1. 디버깅 방법
- **CSS 선택자 확인**: 브라우저 개발자 도구로 정확한 선택자 확인
- **테이블 구조**: div 래핑 여부 확인
- **링크 패턴**: 상대 URL과 절대 URL 구분

### 2. 성능 최적화
- **요청 간격**: 1초 간격으로 충분
- **세션 재사용**: 동일한 세션으로 모든 요청 처리
- **에러 처리**: 404 또는 접근 불가 페이지 예외 처리

### 3. 확장 가능성
- **더 많은 페이지**: `max_pages` 매개변수 조정
- **다른 게시판**: `bo_table` 매개변수 변경
- **검색 기능**: 검색 매개변수 추가

## 트러블슈팅

### 1. 일반적인 문제
- **테이블 찾기 실패**: `div.tbl_head01.tbl_wrap table` 선택자 사용
- **제목 링크 누락**: `div.bo_tit a` 선택자 사용
- **빈 본문**: 텍스트 길이 및 키워드 필터링 적용

### 2. 파일 다운로드 문제
- **HTML 응답**: Content-Type 확인
- **0바이트 파일**: 파일 크기 검증
- **권한 문제**: 적절한 User-Agent 설정

### 3. 인코딩 문제
- **한글 깨짐**: UTF-8 인코딩 확인
- **파일명 문제**: 파일 시스템 호환성 확인

## 비교 분석

### OFSI vs DCTF
- **OFSI**: POST 방식, 복잡한 폼 데이터, 세션 관리 필수
- **DCTF**: GET 방식, 단순한 URL 패턴, 기본 세션 관리

### 개발 복잡도
- **DCTF**: 상대적으로 단순한 구조, 빠른 개발 가능
- **PHP BBS**: 표준적인 구조로 다른 유사 사이트 적용 가능

이 인사이트는 향후 PHP 기반 게시판 사이트 스크래핑 시 참고할 수 있는 표준 패턴으로 활용 가능합니다.